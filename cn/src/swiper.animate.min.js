/* eslint-disable no-unused-expressions */
/* eslint-disable no-plusplus */
export function swiperAnimateCache() {
  const allBoxes = window.document.documentElement.querySelectorAll('.ani');
  for (let i = 0; i < allBoxes.length; i++) {
    allBoxes[i].attributes.style
      ? allBoxes[i].setAttribute('ani-style-cache', allBoxes[i].attributes.style.value)
      : allBoxes[i].setAttribute('ani-style-cache', ' ');
    allBoxes[i].style.visibility = 'hidden';
  }
}

export function clearSwiperAnimate() {
  const allBoxes = window.document.documentElement.querySelectorAll('.ani');
  for (let i = 0; i < allBoxes.length; i++) {
    allBoxes[i].attributes['ani-style-cache'] && allBoxes[i].setAttribute('style', allBoxes[i].attributes['ani-style-cache'].value);
    allBoxes[i].style.visibility = 'hidden';
    allBoxes[i].className = allBoxes[i].className.replace('animated', ' ');
    const effectValue = allBoxes[i].attributes['ani-effect'].value;
    /* eslint-disable-next-line */
    allBoxes[i].attributes['ani-effect'] && (effectValue, allBoxes[i].className = allBoxes[i].className.replace(effectValue, ' '))
  }
}

export function swiperAnimate(a) {
  clearSwiperAnimate();
  const b = a.slides[a.activeIndex].querySelectorAll('.ani');
  for (let i = 0; i < b.length; i++) {
    b[i].style.visibility = 'visible';
    const effect = b[i].attributes['ani-effect']
      ? b[i].attributes['ani-effect'].value
      : '';
    b[i].className = `${b[i].className} ${effect} animated`;
    const duration = b[i].attributes['ani-duration']
      ? b[i].attributes['ani-duration'].value
      : '';
    // duration && style
    const delay = b[i].attributes['ani-delay']
      ? b[i].attributes['ani-delay'].value
      : '';
    const style = `
      ${b[i].attributes.style.value}
      animation-duration:${duration};
      -webkit-animation-duration:${duration};
      animation-delay:${delay};
      -webkit-animation-delay:${delay};
    `;
    // delay && (style = style )
    b[i].setAttribute('style', style);
  }
}
